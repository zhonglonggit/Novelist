define("publicTabModule",["jquery"],function(a){var b={};return b={tabChange:function(b,c,d,e){c.hide().eq(0).show(),b.each(function(f){a(this).on(d,function(){b.removeClass(e),a(this).addClass(e),c.hide().eq(f).show()})})},slideTab:function(b,c,d,e,f){var g=b.find(".bar");e.hide().eq(0).show(),g.each(function(g){var h=b.eq(g).find(".nav li"),i=h.eq(0).outerWidth();a(this).parent().find("li").hasClass(c)?a(this).css("width","246px"):a(this).css("width",i+"px"),h.on(d,function(){var b=a(this).parent().siblings(".more").find("li"),c=a(this).index(),d=a(this).outerWidth(),g=a(this).offset().left-a(this).parent().offset().left+(d-i)/2,j=a(this).parent().siblings(".bar");j.animate({left:g+"px"},100),h.removeClass("on"),a(this).addClass("on"),b.hide(),b.eq(c).show(),e.hide().eq(c).show(),a(window).scroll(),f&&f.apply(this)})})},lunboTab:function(b,c,d){for(var e=b.length,f=0,g="",h=0;e>h;h++)g+='<span class="dot"></span>';a(g).insertBefore(".index_ebookarrow_module .right"),b.hide().eq(0).show();var i=a(".index_ebookarrow_module .index_ebookarrow_inner"),j=i.outerWidth();i.css("margin-left",-j/2+"px");var k=a(".index_ebookarrow_module").find(".dot");k.eq(0).addClass("on"),k.on("click",function(){var c=a(this).index()-1;k.removeClass("on").eq(c).addClass("on"),b.hide().eq(c).fadeIn()}),c.on("click",function(){f--,0>f&&(f=e-1),b.hide().eq(f).fadeIn(),k.removeClass("on").eq(f).addClass("on")}),d.on("click",function(){f++,f==e&&(f=0),b.hide().eq(f).fadeIn(),k.removeClass("on").eq(f).addClass("on")})}}}),define("indexClassModule",["jquery"],function(a){var b={};return b={classifyLayer:function(b,c,d,e){var f;a(c).hover(function(){var g=a(this).index()-1;clearTimeout(f),a(d).hide(),a(c).removeClass(e),a(this).addClass(e),g==a(c).length-1&&a(this).addClass("last"),a(this).parent().siblings(d).eq(g).show(),thisLayer=a(this).parent().siblings(d).eq(g);var h,i=thisLayer.outerHeight(),j=parseFloat(a(b).offset().top,10),k=parseFloat(a(this).offset().top,10),l=a(this).outerHeight(),m=parseFloat(a(window).scrollTop(),10);m>k?h=k-j:(h=m-j>k-j+l-i?m-j:k-j+l-i,0>h&&(h=0)),thisLayer.css("top",h+"px");var n=thisLayer.find("img");n.each(function(b){"0"==a(this).data("status")&&(a(this).attr("src",a(this).data("src")),a(this).data("status","1"))})},function(){var b=a(this).index()-1;b==a(c).length-1&&a(this).removeClass("last"),clearTimeout(f),f=setTimeout(function(){a(d).eq(b).hide(),a(c).eq(b).removeClass(e)},100)}),a(d).hover(function(){clearTimeout(f)},function(){a(d).hide(),a(c).removeClass(e)})}}}),define("publicHeaderNav",["jquery"],function(a){var b={itHover:function(){var b=a(".public_headernav_module .nav li");b.bind("mouseenter",function(){clearTimeout(c),a(this).hasClass("chubannav")||a(this).hasClass("yuanchuangnav")?(a(".chuban").css({display:"none"}),a(".yuanchuang").css({display:"none"}),a(this).hasClass("chubannav")?(a(".chuban").css({display:"block"}),a(".public_child_nav").css({display:"block"})):a(this).hasClass("yuanchuangnav")&&(a(".yuanchuang").css({display:"block"}),a(".public_child_nav").css({display:"block"}))):(a(".chuban").css({display:"none"}),a(".yuanchuang").css({display:"none"}),a(".public_child_nav").css({display:"none"}))});var c=null;b.bind("mouseleave",function(){c=setTimeout(function(){a(".chuban").css({display:"none"}),a(".yuanchuang").css({display:"none"}),a(".public_child_nav").css({display:"none"})},1e3)});var d=a(".public_headerchildnav_module");d.bind("mouseenter",function(){clearTimeout(c)}),d.bind("mouseleave",function(){a(".chuban").css({display:"none"}),a(".yuanchuang").css({display:"none"}),a(".public_child_nav").css({display:"none"})})}};return b}),define("publicHeaderChildnavModule",["jquery"],function(a){var b={itHover:function(){a(".yuanchuang .inner a").bind("mouseenter",function(){a(".yuanchuang .inner a i").removeClass("on"),a(this).find("i").addClass("on")})}};return b}),define("publicSideCodeModule",["jquery"],function(a){var b={toTop:function(){a(".public_totop_module").on("click",function(){a(window).scrollTop(0)}),a(window).bind("scroll",function(){0===a(window).scrollTop()?a(".public_totop_module").hide():a(".public_totop_module").show()})},closeCode:function(){a(".public_sideecode_module .close").on("click",function(){a(".public_sideecode_module").css({display:"none"})})}};return b}),define("publicHeadersearch",["jquery"],function(a){var b={getCursor:function(){a(".searchtext").on("focus",function(){"作品、作者、出版社"===a(this).val()&&a(this).val("")}),a(".searchtext").on("blur",function(){""===a(this).val()&&a(this).val("作品、作者、出版社")})},searchBtn:function(){a(".searchbtn").on("click",function(){""===a(".searchtext").val()||"作品、作者、出版社"===a(".searchtext").val()||(window.location="http://e.dangdang.com/searchresult_page.html?keyword="+a(".searchtext").val())}),document.onkeydown=function(b){var c=b||window.event||arguments.callee.caller.arguments[0];c&&13==c.keyCode&&(""===a(".searchtext").val()||"作品、作者、出版社"===a(".searchtext").val()||(window.location="http://e.dangdang.com/searchresult_page.html?keyword="+a(".searchtext").val()))}}};return b}),define("ddbase",["jquery","underscore"],function(a,b){var c=c||{};return c.header_trim=function(a){return a.replace(/(\s*$)|(^\s*)/g,"")},c.getCookie=function(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?decodeURIComponent(escape(b[2])):null},c.token=function(){var a=c.getCookie("sessionID");return null===a&&(a=""),a},c.setCookie=function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+60*c*60*1e3),d?document.cookie=a+"="+escape(b)+";Domain="+d+";path=/;expires="+e.toGMTString():document.cookie=a+"="+escape(b)+";Domain=dangdang.com;path=/;expires="+e.toGMTString()},c.delCookie=function(a){var b=new Date;b.setTime(b.getTime()-1);var d=c.getCookie(a);null!=d&&(document.cookie=a+"="+d+";expires="+b.toGMTString()+"; path=/;Domain=dangdang.com")},c.setData=function(a,b,d){var b=encodeURIComponent(b);if(window.localStorage){var e=window.localStorage;e.setItem(a,b)}else c.setCookie(a,b,d)},c.getData=function(a){if(window.localStorage){var b=window.localStorage;return b.getItem(a)?decodeURIComponent(b.getItem(a)):null}c.getCookie(a)},c.delData=function(a){if(window.localStorage){var b=window.localStorage;b.removeItem(a)}else c.delCookie(a)},c.dateFormat=function(a,b){var c=b,d=new Date(a),e={"M+":d.getMonth()+1,"d+":d.getDate(),"h+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),"q+":Math.floor((d.getMonth()+3)/3),S:d.getMilliseconds()};/(y+)/.test(c)&&(c=c.replace(RegExp.$1,(d.getFullYear()+"").substr(4-RegExp.$1.length)));for(var f in e)new RegExp("("+f+")").test(c)&&(c=c.replace(RegExp.$1,1==RegExp.$1.length?e[f]:("00"+e[f]).substr((""+e[f]).length)));return c},c.randomNumeric=function(a){for(var b="",c=a,d=0;c>d;d++)b+=Math.floor(10*Math.random());return b},c.generateGuid=function(){var a="",b=(new Date).getTime();b=b.substring(b.length()-3,b.length());var d=c.dateFormat(new Date,"yyyyMMddHHmmss");return a=d+b+c.randomNumeric(6)+c.randomNumeric(6)+c.randomNumeric(6),a.toString()},c.getQueryString=function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.search.substr(1).match(b);return null!=c?decodeURIComponent(c[2]):null},c.loadJsFiles=function(a,b){var c=document.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("src",b),a.append(c)},c.UUID=function(){this.id=this.createUUID()},c.UUID.prototype={valueOf:function(){return this.id},toString:function(){return this.id},createUUID:function(){var a=this,b=new Date(1582,10,15,0,0,0,0),c=new Date,d=c.getTime()-b.getTime(),e=a.getIntegerBits(d,0,31),f=a.getIntegerBits(d,32,47),g=a.getIntegerBits(d,48,59)+"1",h=a.getIntegerBits(a.rand(4095),0,7),i=a.getIntegerBits(a.rand(4095),0,7),j=a.getIntegerBits(a.rand(8191),0,7)+a.getIntegerBits(a.rand(8191),8,15)+a.getIntegerBits(a.rand(8191),0,7)+a.getIntegerBits(a.rand(8191),8,15)+a.getIntegerBits(a.rand(8191),0,15);return e+f+g+h+i+j},getIntegerBits:function(a,b,c){var d=this.returnBase(a,16),e=new Array,f="",g=0;for(g=0;g<d.length;g++)e.push(d.substring(g,g+1));for(g=Math.floor(b/4);g<=Math.floor(c/4);g++)f+=e[g]&&""!=e[g]?e[g]:"0";return f},returnBase:function(a,b){return a.toString(b).toUpperCase()},rand:function(a){return Math.floor(Math.random()*(a+1))}},c.getUserName=function(){var b=c.getCookie("MDD_username");return null==b&&a.ajax({method:"GET",url:"/media/api2.go?action=getUser&selfType=0&pubId=5&rewardIcon="+c.setBaseApiParams(),async:!1,success:function(a){if(0==parseInt(a.status.code)){var d=a.data.userInfo;c.setCookie("MDD_username",d.nickName,8760),c.setCookie("MDD_custId",d.pubCustId,8760),b=d.nickName}}}),b},c.getCustId=function(){return c.token()&&null!=c.token()?(a.ajax({method:"GET",url:"/media/api2.go?action=getUser&selfType=0&pubId=5&rewardIcon="+c.setBaseApiParams(),async:!1,success:function(a){if(0==parseInt(a.status.code)){var b=a.data.userInfo;custId=decodeURIComponent(b.pubCustId)}}}),custId):!1},c.setBaseApiParams=function(){var a=c.getQueryString("channelId");null==a&&(a=7e4);var b=c.getCookie("__permanent_id");return null==b&&(b=""),"&deviceSerialNo=html5&macAddr=html5&channelType=html5&permanentId="+b+"&returnType=json&channelId="+a+"&clientVersionNo=5.8.4&platformSource=DDDS-P&fromPlatform=106&deviceType=pconline&token="+c.token()},c.baseApiParams=c.setBaseApiParams(),c.template=function(a,c){var d=b.template(a);return d(c)},c.dealTime=function(a){if(void 0==a)return"";var a=parseInt(a),b=(new Date).getTime()-a,c=864e5;if(b>0){if(b-c>0){var d=new Date(a);return d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()}var e=b/1e3;if(parseInt(e/60)<60)return parseInt(e/60)+"分钟前";var f=Math.floor(e/3600);return f+"小时"+parseInt((e-3600*f)/60)+"分钟前"}return"0分钟前"},c.newDealTime=function(a){function b(a){return 1===(a+"").length?"0"+a:a}function c(){var a=new Date,b=a.getHours(),c=a.getMinutes(),d=a.getSeconds();return 1e3*(3600*b+60*c+d)}if(!a)return"";var d=parseInt(a),a=new Date(d),e=new Date,f=e.getTime(),g=a.getFullYear(),h=e.getFullYear(),i=a.getMonth()+1,j=a.getDate(),k=a.getHours(),l=a.getMinutes();if(h>g)return b(g)+"-"+b(i)+"-"+b(j);var m=c();return m>f-d?"今天 "+b(k)+":"+b(l):f-d>m&&m+864e5>f-d?"昨天"+b(k)+":"+b(l):b(i)+"-"+b(j)},c.leaveTime=function(a){var a=parseInt(a);if(isNaN(a)||!a)return 0;var b=a-(new Date).getTime();if(0>=b)return 0;var c=864e5,d=36e5,e=6e4,f=1e3;return b>=c?parseInt(b/c)+"天":b>=d?parseInt(b/d)+"小时":b>=e?parseInt(b/e)+"分钟":b>=f?parseInt(b/f)+"秒":void 0},c.getBookUrl=function(a){var b=a.mediaType||a.bookType;if(!b)return null;var c="";switch(b){case 1:case 2:case 4:a.saleId&&a.mediaId&&(c="./product/"+a.saleId+".html");break;case 3:a.productId&&(c="http://product.dangdang.com/"+a.productId+".html")}return c},c.joinBar=function(b){a.get("/media/api.go?action=barMember"+c.baseApiParams,{actionType:b.actionType||1,barId:b.barId,custId:b.custId||""},function(a){return 0!=a.status.code&&10003!=a.status.code&&25015!=a.status.code?void c.setMessageTip("好像发生了什么事情，稍后再试试吧~"):void b.callback(a)})},c.onTime=function(b){var c=a(window).scrollTop(),d=a(document).height(),e=a(window).height();return c+e+b>=d?!0:!1},c.dealStar=function(a){return Math.round(a)},c.setMessageTip=function(b){var c=this;c.msgTip=a(".message-tip"),0==c.msgTip.length&&(c.msgTip=a('<div class="message-tip"></div>'),a("body").append(c.msgTip)),clearTimeout(c.msgTipTime),c.msgTip.html(b).fadeIn(1e3),c.msgTipTime=setTimeout(function(){c.msgTip.fadeOut(1e3)},2500)},c.hideMessageTip=function(){var b=this;b.msgTip=a(".message-tip"),clearTimeout(b.msgTipTime),b.msgTip.hide()},c.getHost=function(){return"http://e.dangdang.com/"},window.productPostsNum=function(){window.productDetailReturn&&window.productBarReturn&&a("#postNum").length>0&&""==a("#postNum").html()&&a("#postNum").html("("+window.productComNum+"人评论)")},window.productComNum=0,window.productDetailReturn=!1,window.productBarReturn=!1,window.nofind=function(a,b){a.src=b||"img/book_def_180_260.png",a.onerror=null},document.ondragstart=function(){return!1},c}),define("loginModule",["jquery","ddbase"],function(a,b){var c=function(a){var c=b.token();if(""==c){var d,e="https://login.dangdang.com/signin.aspx";d=void 0!=a&&""!=a?a:window.location.href.toString(),window.location.href=e+"?returnurl="+encodeURIComponent(d)}};return c}),define("signOutModule",["jquery","ddbase"],function(a,b){var c=function(c){var d=b.token();if(""!=d){var e="/media/api2.go?action=loginOutV2"+b.setBaseApiParams();a.ajax({method:"POST",url:e,success:function(a){0==parseInt(a.status.code)&&(b.delCookie("sessionID"),b.delCookie("MDD_username"),b.delCookie("MDD_custId"),b.delCookie("login.dangdang.com"),void 0!=c&&c())}})}};return c}),define("headerChildNav",["jquery","ddbase"],function(a,b){var c={init:function(a){var c=this;"original_index"==c.judgePage()&&("man"==b.getQueryString("originalSex")||null==b.getQueryString("originalSex")?c.initPage(a,0):"woman"==b.getQueryString("originalSex")&&c.initPage(a,1)),c.change(a)},change:function(b){a("#originLeftMenuMan").click(function(){window.location.href="original_index_page.html?originalSex=man"}),a("#originLeftMenuWoman").click(function(){window.location.href="original_index_page.html?originalSex=woman"})},clickfn:function(a,b){var c=this;c.initPage(a,b)},judgePage:function(){var a=window.location.pathname,b=a.lastIndexOf("/");return a=a.substr(b+1,a.length-b),a=a.split("_page")[0]},initPage:function(b,c){for(key in b)"#focusPic"!=b[key]?(a(b[key]).find(".sexContent").hide().eq(c).show(),a(b[key]).find(".more li").hide().eq(c).show(),a(b[key]).find(".nav li").hide().eq(c).show(),a(window).scroll()):(a(b[key]).find(".sexContent").css({opacity:0,"z-index":1}).eq(c).css({opacity:1,"z-index":10}),0==c&&window.originWomanPic&&window.originManPic?(originWomanPic.timer=setTimeout(function(){window.originWomanPic.stop()},0),window.originManPic.stop(),window.originManPic.play()):1==c&&window.originWomanPic&&window.originManPic&&(originManPic.timer=setTimeout(function(){window.originManPic.stop()},0),window.originWomanPic.stop(),window.originWomanPic.play()))}};return c}),define("publicMethod",["jquery","publicHeaderNav","publicHeaderChildnavModule","publicSideCodeModule","publicHeadersearch","loginModule","signOutModule","ddbase","headerChildNav"],function(a,b,c,d,e,f,g,h,i){var j={init:function(){b.itHover(),d.toTop(),d.closeCode(),c.itHover(),e.getCursor(),e.searchBtn(),this.checkReadingCenterLogin(),this.jumpToRecharge(),i.init({el1:"#originHotArticle",el2:"#originRecommend",el3:"#originLimitedFree",el4:"#originRightRecomend",el5:"#originBigAds",el6:"#hotWholeBook",el7:"#originalHotTopic",el8:"#focusPic"}),j.setHeaderImg(),a("#loginBtn").click(function(){f()}),a("#signOutBtn").on("click",function(){g(j.setLoginHtml())}),a("#headerMyOrder").on("click",function(){if(""==h.token()){var a=window.location.href;a=a.split("/"),a[a.length-1]="http://orderb.dangdang.com/myallorders.aspx",a=a.join("/"),f(a)}else window.location="http://orderb.dangdang.com/myallorders.aspx"});var k=h.getQueryString("channelId");null==k&&(k=7e4),h.setCookie("MDD_channelId",k,8760),h.setCookie("MDD_fromPlatform","307",8760),this.readcenterRedpoint()},setHeaderImg:function(){if(""!=h.token()){var b=h.getUserName(),c='<img class="header_img" src="img/payment/head_img.png">'+b;a("#loginBtn").html(c),a("#loginBtn").after('<span id="signOutBtn">[退出]</span>'),a("#registerBtn").html("")}},setLoginHtml:function(){a("#signOutBtn").remove(),a("#loginBtn").html("你好，请登录"),a("#registerBtn").html('<a target="_blank" href="https://login.dangdang.com/Register.aspx?returnurl=http://e.dangdang.com/">免费注册</a>|')},setProductTotalCount:function(b){parseInt(b)>0&&a(".public_headersearch_module .shopcar_num").html("("+b+")"),0==parseInt(b)&&a(".public_headersearch_module .shopcar_num").html("")},checkReadingCenterLogin:function(){a("#readingCenterBtn").on("click",function(a){if(a.preventDefault(),h.token()&&""!=h.token())window.location.href="http://e.dangdang.com/reading_center_page.html";else{var b=window.location.href;b=b.split("/"),b[b.length-1]="http://e.dangdang.com/reading_center_page.html",b=b.join("/"),f(b)}})},jumpToRecharge:function(){a(".public_headernav_module .want_to_recharge").on("click",function(a){a.preventDefault(),h.token()&&""!=h.token()?window.location.href="http://e.dangdang.com/recharge_methord_page.html?fromPlatform=309":f()})},readcenterRedpoint:function(){var b=h.token(),c=this;b&&a.get("/media/api.go?action=getCustomerSubscription"+h.baseApiParams,{start:0,end:10},function(b){0==b.status.code&&0!=b.data.allUpdateChapter&&0!=b.data.allUpdateMedia&&(h.getCookie("showzhuigengredpointer")||(a("#readingCenterBtn").html('<i class="icon"></i><span class="zhuigengredcontainer">阅读中心<span class="zhuigengredpoint"></span></span>'),c.zhuigengNotice(b.data),a(".zhuigengredcontainer .zhuigengredpoint").show()))})},getMedia:function(a){for(var b={},c="",d=0;d<a.mediaList.length;d++)if(a.mediaList[d].subscriptionCount>0){b=a.mediaList[d];break}return c=1==a.allUpdateMedia?'<span class="title">'+b.title+'</span>已经更新至<span class="lastChapt">'+b.lastUpdateChapter+"</span>":'<span class="title">'+b.title+"</span>等已经有了更新"},zhuigengNotice:function(b){var c=window.location.href;if(-1!=c.indexOf("index_page")||-1!=c.indexOf("publish_index_page")||-1!=c.indexOf("original_index_page.html")){var d='<div class="zhuigengNotice"><div class="title">更新通知<div class="closeBtn"></div></div><div class="content"><div>'+this.getMedia(b)+'</div><a class="gotoRead" href="booksshelf_page.html?tab=read">去书架</a></div></div>';a("body").append(d),a("body").delegate(".zhuigengNotice .closeBtn","click",function(){a(".zhuigengNotice").hide()})}}};return j}),define("indexFocusone",["jquery"],function(a){var b=function(){function b(b,d){"dot"==b?(d='<ol class="dots" style="position:absolute">',a.each(c.li,function(a){d+='<li class="'+(a===c.i?b+" active":b)+'"></li>'}),d+="</ol>"):(d='<div class="',d=d+b+'s">'+d+b+' prev">'+c.o.prev+"</div>"+d+b+' next">'+c.o.next+"</div></div>"),c.el.addClass("has-"+b+"s").append(d).find("."+b).click(function(){var b=a(this);b.hasClass("dot")?c.stop().to(b.index()):b.hasClass("prev")?c.prev():c.next()})}var c=this,d=!1;c.o={speed:500,delay:3e3,init:0,pause:!0,loop:!0,keys:!1,dots:!1,arrows:!1,prev:"&larr;",next:"&rarr;",fluid:!1,starting:!1,complete:!1,items:">ul",item:">li",easing:"swing",autoplay:!0},c.init=function(d,e){c.o=a.extend(c.o,e),c.el=d,c.ul=d.find(c.o.items),c.max=[0|d.outerWidth(),0|d.outerHeight()],c.li=c.ul.find(c.o.item).each(function(b){var d=a(this),e=d.outerWidth(),f=d.outerHeight();e>c.max[0]&&(c.max[0]=e),f>c.max[1]&&(c.max[1]=f)});var e=c.o,f=c.ul,g=c.li,h=g.length;return c.i=0,d.css({width:c.max[0],height:g.first().outerHeight(),overflow:"hidden"}),f.css({position:"relative",left:0,width:100*h+"%"}),e.fluid?g.css({"float":"left",width:100/h+"%"}):g.css({"float":"left",width:c.max[0]+"px"}),e.autoplay&&setTimeout(function(){0|e.delay&&(c.play(),e.pause&&d.on("mouseover mouseout",function(a){c.stop(),"mouseout"===a.type&&c.play()}))},0|e.init),e.keys&&a(document).keydown(function(a){switch(a.which){case 37:c.prev();break;case 39:c.next();break;case 27:c.stop()}}),e.dots&&b("dot"),e.arrows&&b("arrow"),e.fluid&&a(window).resize(function(){c.r&&clearTimeout(c.r),c.r=setTimeout(function(){var a={height:g.eq(c.i).outerHeight()},b=d.outerWidth();f.css(a),a.width=Math.min(Math.round(b/d.parent().width()*100),100)+"%",d.css(a),g.css({width:b+"px"})},50)}).resize(),(a.event.special.move||a.Event("move"))&&d.on("movestart",function(a){a.distX>a.distY&&a.distX<-a.distY||a.distX<a.distY&&a.distX>-a.distY?a.preventDefault():d.data("left",c.ul.offset().left/d.width()*100)}).on("move",function(a){var b=100*a.distX/d.width(),e=100*a.deltaX/d.width();c.ul[0].style.left=parseInt(c.ul[0].style.left.replace("%",""))+e+"%",c.ul.data("left",b)}).on("moveend",function(a){var b=c.ul.data("left");if(Math.abs(b)>30){var d=b>0?c.i-1:c.i+1;(0>d||d>=h)&&(d=c.i),c.to(d)}else c.to(c.i)}),c},c.to=function(b,e){c.t&&(c.stop(),c.play());var f=c.o,g=c.el,h=c.ul,i=c.li,j=c.i,k=i.eq(b);if(a.isFunction(f.starting)&&!e&&f.starting(g,i.eq(j)),k.length&&!(0>b)||f.loop!==d){k.length||(b=0),0>b&&(b=i.length-1),k=i.eq(b);var l=e?5:0|f.speed,m=f.easing,n={height:k.outerHeight()};h.queue("fx").length||(g.find(".dot").eq(b).addClass("active").siblings().removeClass("active"),g.animate(n,l,m)&&h.animate(a.extend({left:"-"+b+"00%"},n),l,m,function(d){c.i=b,a.isFunction(f.complete)&&!e&&f.complete(g,k)}))}},c.play=function(){c.t=setInterval(function(){c.to(c.i+1)},0|c.o.delay)},c.stop=function(){return c.t=clearInterval(c.t),c},c.next=function(){return c.stop().to(c.i+1)},c.prev=function(){return c.stop().to(c.i-1)}},c={unslider:function(c,d){var e=d.length,f=a(d),g="unslider"+(e>1?"-"+ ++index:""),h=new b;return h.init(f,c),f.data(g,h).data("key",g),h}};return b.version="1.0.0",c}),define("indexLimitedTemplate",["jquery","underscore","backbone","ddbase"],function(a,b,c,d){var e='<% if(data.length>0){%><div class="index_subnav_module"><ul class="nav clearfix"><li class="first on"><a href="morelist_page.html?columnType=rec_limited_free&title=限时免费" target="_blank">限时免费</a><div class="index_time_module"><span class="time">00</span>天<span class="time">00</span>时<span class="time">00</span>分<span class="time">00</span>秒</div></li></ul><div class="bar"></div><ul class="more"><li><a href="morelist_page.html?columnType=rec_limited_free&title=限时免费" target="_blank">查看更多</a></li></ul></div><div class="clearfix"><%data.each(function(item,i){%><%if(i<8){%><%var item_detail = item.get("mediaList")[0];%><%var item_title = item_detail.title;%><%var item_descs = item_detail.descs;%><div class="index_smallcell_module"><div class="book clearfix"><%var link = ddbase.getBookUrl({mediaType:item_detail.mediaType,saleId:item_detail.saleId,mediaId:item_detail.mediaId})%><div class="bookcover"><a href="<%=link%>" target="_blank"><img src="" data-original="<%=item_detail.coverPic%>" onerror="this.src=\'img/book_def_180_260.png\'"/></a></div><div class="bookinfo"><div class="title"><a href="<%=link%>" target="_blank"><%=item_title%></a></div><div class="author"><%=item_detail.authorPenname%></div><div class="startie"><div class="star"><%if(item_detail.avgStarLevel != undefined){%><%var starlevel = ddbase.dealStar(item_detail.avgStarLevel)%><%for(var i=0;i<starlevel;i++){%><span class="has"></span><%}%><%for(var j=0;j<5-starlevel;j++){%><span></span><%}%><%}%></div><div class="tienum">(<%=item_detail.commentNumber%>)</div></div><div class="price"><a href="<%=link%>" target="_blank"><span class="now"><i class="free">免费领取</i></span></a><%if(item_detail.paperBookId != undefined ){%>|<span><%=dealPrice.originPrice(item_detail)%></span><%}%></div><div class="des"><%=item_descs%></div></div></a></div></div>  <%}%><%})%></div><%}%>';return e}),define("dealPrice",[],function(){var a={init:function(a){var b="";if(null!=a&&a.mediaList&&a.mediaList[0]){var c=a.mediaList[0];if(3==c.promotionId||1==c.freeBook)b="免费";else if(2==c.mediaType){void 0==c.price?b="":0==c.price?b="免费":c.promotionPrice&&void 0!=c.promotionPrice?(b=Math.min((parseInt(c.price)/100).toFixed(2),c.promotionPrice),b="￥"+b.toFixed(2)):b="￥"+(parseInt(c.price)/100).toFixed(2)}else 1==c.mediaType?b=1==a.isSupportFullBuy?void 0==a.price?"":0==a.price?"免费":parseInt(a.price)+"铃铛/本":void 0==c.priceUnit?"":0==c.priceUnit?"免费":parseInt(c.priceUnit)+"铃铛/千字":4==c.mediaType?b=1==a.isSupportFullBuy?void 0==a.price?"":0==a.price?"免费":parseInt(a.price)+"铃铛/本":void 0==c.priceUnit?"":0==c.priceUnit?"免费":parseInt(c.priceUnit)+"铃铛/话":3==c.mediaType&&(b=0==c.lowestPrice?"免费":"￥"+(parseInt(100*c.lowestPrice)/100).toFixed(2));return b}},dealPrice2:function(a){var b="";if(null!=a)if(3==a.promotionId)b="免费";else if(2==a.mediaType){b=void 0==a.price?"":0==a.price?"免费":"￥"+(parseInt(a.price)/100).toFixed(2)}else 1==a.mediaType?b=1==a.isSupportFullBuy?void 0==a.price?"":0==a.price?"免费":parseInt(a.price)+"铃铛/本":void 0==a.priceUnit?"":0==a.priceUnit?"免费":parseInt(a.priceUnit)+"铃铛/千字":4==a.mediaType?b=1==a.isSupportFullBuy?void 0==a.price?"":0==a.price?"免费":parseInt(a.price)+"铃铛/本":void 0==a.priceUnit?"":0==a.priceUnit?"免费":parseInt(a.priceUnit)+"铃铛/话":3==a.mediaType&&(b=0==a.lowestPrice?"免费":"￥"+(parseInt(100*a.lowestPrice)/100).toFixed(2));return b},originPrice:function(a){var b="";return void 0!=a.paperBookId&&""!=a.paperBookId&&(b="￥"+(parseInt(a.paperBookPrice)/100).toFixed(2)),b}};return a}),define("limitedFreeModule",["jquery","underscore","backbone","ddbase","dealPrice","lazyload"],function(a,b,c,d,e,f){var g={};return g.module=c.Model.extend({defaults:{mediaList:[{authorId:"",authorPenname:"",categoryIds:"",categorys:"",coverPic:"",descs:"",isFull:1,isStore:0,mediaId:"",mediaType:1,recommandWords:"",saleId:"",title:""}]}}),g.collection=c.Collection.extend({model:g.module}),g.view=c.View.extend({initialize:function(a){var b=this;b.el=a.el,b.collections=new g.collection,b.dataUrl=a.dataUrl+d.baseApiParams,b.template=a.template,b.render()},render:function(){var c=this;c.collections.fetch({url:c.dataUrl,success:function(f,g){null!=g&&(c.collections.set(g.data.saleList),a(c.el).html(b.template(c.template)({data:c.collections,ddbase:d,dealPrice:e})),g.data.overtime&&c.setTime(g.data.overtime),a(".index_limitedfree_module img").lazyload({effect:"fadeIn"}))},error:function(){}})},setTime:function(b){var c=this,d=new Date(b),e=a(c.el).find(".index_time_module .time");c.sto&&clearInterval(c.sto),d.getTime()-(new Date).getTime()<0||(c.sto=setInterval(function(){var a=d.getTime()-(new Date).getTime();if(0>=a)return clearInterval(c.sto),void c.reload();var b=parseInt(a/1e3/60/60/24%1e3,10),f=parseInt(a/1e3/60/60%24%1e3,10),g=parseInt(a/1e3/60%60,10),h=parseInt(a/1e3%60,10);Math.floor(f/100);b>0?e.eq(0).html(b):e.eq(0).parent("span").hide(),e.eq(1).html(f),e.eq(2).html(g),e.eq(3).html(h)},1e3))}}),g}),define("qrcode",["jquery"],function(a){return function(b){b.fn.qrcode=function(c){function d(a){this.mode=i,this.data=a}function e(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function f(a,b){if(void 0==a.length)throw Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function g(a,b){this.totalCount=a,this.dataCount=b}function h(){this.buffer=[],this.length=0}var i;d.prototype={getLength:function(){return this.data.length},write:function(a){for(var b=0;b<this.data.length;b++)a.put(this.data.charCodeAt(b),8)}},e.prototype={addData:function(a){this.dataList.push(new d(a)),this.dataCache=null},isDark:function(a,b){if(0>a||this.moduleCount<=a||0>b||this.moduleCount<=b)throw Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var a=1,a=1;40>a;a++){for(var b=g.getRSBlocks(a,this.errorCorrectLevel),c=new h,d=0,e=0;e<b.length;e++)d+=b[e].dataCount;for(e=0;e<this.dataList.length;e++)b=this.dataList[e],c.put(b.mode,4),c.put(b.getLength(),j.getLengthInBits(b.mode,a)),b.write(c);if(c.getLengthInBits()<=8*d)break}this.typeNumber=a}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,b){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var c=0;c<this.moduleCount;c++){this.modules[c]=Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++)this.modules[c][d]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,b),7<=this.typeNumber&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,b)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(-1>=a+c||this.moduleCount<=a+c))for(var d=-1;7>=d;d++)-1>=b+d||this.moduleCount<=b+d||(this.modules[a+c][b+d]=c>=0&&6>=c&&(0==d||6==d)||d>=0&&6>=d&&(0==c||6==c)||c>=2&&4>=c&&d>=2&&4>=d?!0:!1)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;8>c;c++){this.makeImpl(!0,c);var d=j.getLostPoint(this);(0==c||a>d)&&(a=d,b=c)}return b},createMovieClip:function(a,b,c){for(a=a.createEmptyMovieClip(b,c),this.make(),b=0;b<this.modules.length;b++)for(var c=1*b,d=0;d<this.modules[b].length;d++){var e=1*d;this.modules[b][d]&&(a.beginFill(0,100),a.moveTo(e,c),a.lineTo(e+1,c),a.lineTo(e+1,c+1),a.lineTo(e,c+1),a.endFill())}return a},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(a=8;a<this.moduleCount-8;a++)null==this.modules[6][a]&&(this.modules[6][a]=0==a%2)},setupPositionAdjustPattern:function(){for(var a=j.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var f=-2;2>=f;f++)for(var g=-2;2>=g;g++)this.modules[d+f][e+g]=-2==f||2==f||-2==g||2==g||0==f&&0==g?!0:!1}},setupTypeNumber:function(a){for(var b=j.getBCHTypeNumber(this.typeNumber),c=0;18>c;c++){var d=!a&&1==(b>>c&1);this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(c=0;18>c;c++)d=!a&&1==(b>>c&1),this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d},setupTypeInfo:function(a,b){for(var c=j.getBCHTypeInfo(this.errorCorrectLevel<<3|b),d=0;15>d;d++){var e=!a&&1==(c>>d&1);6>d?this.modules[d][8]=e:8>d?this.modules[d+1][8]=e:this.modules[this.moduleCount-15+d][8]=e}for(d=0;15>d;d++)e=!a&&1==(c>>d&1),8>d?this.modules[8][this.moduleCount-d-1]=e:9>d?this.modules[8][15-d-1+1]=e:this.modules[8][15-d-1]=e;this.modules[this.moduleCount-8][8]=!a},mapData:function(a,b){for(var c=-1,d=this.moduleCount-1,e=7,f=0,g=this.moduleCount-1;g>0;g-=2)for(6==g&&g--;;){for(var h=0;2>h;h++)if(null==this.modules[d][g-h]){var i=!1;f<a.length&&(i=1==(a[f]>>>e&1)),j.getMask(b,d,g-h)&&(i=!i),this.modules[d][g-h]=i,e--,-1==e&&(f++,e=7)}if(d+=c,0>d||this.moduleCount<=d){d-=c,c=-c;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(a,b,c){for(var b=g.getRSBlocks(a,b),d=new h,f=0;f<c.length;f++){var i=c[f];d.put(i.mode,4),d.put(i.getLength(),j.getLengthInBits(i.mode,a)),i.write(d)}for(f=a=0;f<b.length;f++)a+=b[f].dataCount;if(d.getLengthInBits()>8*a)throw Error("code length overflow. ("+d.getLengthInBits()+">"+8*a+")");for(d.getLengthInBits()+4<=8*a&&d.put(0,4);0!=d.getLengthInBits()%8;)d.putBit(!1);for(;!(d.getLengthInBits()>=8*a)&&(d.put(e.PAD0,8),!(d.getLengthInBits()>=8*a));)d.put(e.PAD1,8);return e.createBytes(d,b)},e.createBytes=function(a,b){for(var c=0,d=0,e=0,g=Array(b.length),h=Array(b.length),i=0;i<b.length;i++){var k=b[i].dataCount,l=b[i].totalCount-k,d=Math.max(d,k),e=Math.max(e,l);g[i]=Array(k);for(var m=0;m<g[i].length;m++)g[i][m]=255&a.buffer[m+c];for(c+=k,m=j.getErrorCorrectPolynomial(l),k=new f(g[i],m.getLength()-1).mod(m),h[i]=Array(m.getLength()-1),m=0;m<h[i].length;m++)l=m+k.getLength()-h[i].length,h[i][m]=l>=0?k.get(l):0}for(m=i=0;m<b.length;m++)i+=b[m].totalCount;for(c=Array(i),m=k=0;d>m;m++)for(i=0;i<b.length;i++)m<g[i].length&&(c[k++]=g[i][m]);for(m=0;e>m;m++)for(i=0;i<b.length;i++)m<h[i].length&&(c[k++]=h[i][m]);return c},i=4;for(var j={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;0<=j.getBCHDigit(b)-j.getBCHDigit(j.G15);)b^=j.G15<<j.getBCHDigit(b)-j.getBCHDigit(j.G15);return(a<<10|b)^j.G15_MASK;
},getBCHTypeNumber:function(a){for(var b=a<<12;0<=j.getBCHDigit(b)-j.getBCHDigit(j.G18);)b^=j.G18<<j.getBCHDigit(b)-j.getBCHDigit(j.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return j.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case 0:return 0==(b+c)%2;case 1:return 0==b%2;case 2:return 0==c%3;case 3:return 0==(b+c)%3;case 4:return 0==(Math.floor(b/2)+Math.floor(c/3))%2;case 5:return 0==b*c%2+b*c%3;case 6:return 0==(b*c%2+b*c%3)%2;case 7:return 0==(b*c%3+(b+c)%2)%2;default:throw Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var b=new f([1],0),c=0;a>c;c++)b=b.multiply(new f([1,k.gexp(c)],0));return b},getLengthInBits:function(a,b){if(b>=1&&10>b)switch(a){case 1:return 10;case 2:return 9;case i:return 8;case 8:return 8;default:throw Error("mode:"+a)}else if(27>b)switch(a){case 1:return 12;case 2:return 11;case i:return 16;case 8:return 10;default:throw Error("mode:"+a)}else{if(!(41>b))throw Error("type:"+b);switch(a){case 1:return 14;case 2:return 13;case i:return 16;case 8:return 12;default:throw Error("mode:"+a)}}},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;b>d;d++)for(var e=0;b>e;e++){for(var f=0,g=a.isDark(d,e),h=-1;1>=h;h++)if(!(0>d+h||d+h>=b))for(var i=-1;1>=i;i++)0>e+i||e+i>=b||0==h&&0==i||g==a.isDark(d+h,e+i)&&f++;f>5&&(c+=3+f-5)}for(d=0;b-1>d;d++)for(e=0;b-1>e;e++)f=0,a.isDark(d,e)&&f++,a.isDark(d+1,e)&&f++,a.isDark(d,e+1)&&f++,a.isDark(d+1,e+1)&&f++,(0==f||4==f)&&(c+=3);for(d=0;b>d;d++)for(e=0;b-6>e;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(e=0;b>e;e++)for(d=0;b-6>d;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(e=f=0;b>e;e++)for(d=0;b>d;d++)a.isDark(d,e)&&f++;return a=Math.abs(100*f/b/b-50)/5,c+10*a}},k={glog:function(a){if(1>a)throw Error("glog("+a+")");return k.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;a>=256;)a-=255;return k.EXP_TABLE[a]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},l=0;8>l;l++)k.EXP_TABLE[l]=1<<l;for(l=8;256>l;l++)k.EXP_TABLE[l]=k.EXP_TABLE[l-4]^k.EXP_TABLE[l-5]^k.EXP_TABLE[l-6]^k.EXP_TABLE[l-8];for(l=0;255>l;l++)k.LOG_TABLE[k.EXP_TABLE[l]]=l;return f.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var b=Array(this.getLength()+a.getLength()-1),c=0;c<this.getLength();c++)for(var d=0;d<a.getLength();d++)b[c+d]^=k.gexp(k.glog(this.get(c))+k.glog(a.get(d)));return new f(b,0)},mod:function(a){if(0>this.getLength()-a.getLength())return this;for(var b=k.glog(this.get(0))-k.glog(a.get(0)),c=Array(this.getLength()),d=0;d<this.getLength();d++)c[d]=this.get(d);for(d=0;d<a.getLength();d++)c[d]^=k.gexp(k.glog(a.get(d))+b);return new f(c,0).mod(a)}},g.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],g.getRSBlocks=function(a,b){var c=g.getRsBlockTable(a,b);if(void 0==c)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var d=c.length/3,e=[],f=0;d>f;f++)for(var h=c[3*f+0],i=c[3*f+1],j=c[3*f+2],k=0;h>k;k++)e.push(new g(i,j));return e},g.getRsBlockTable=function(a,b){switch(b){case 1:return g.RS_BLOCK_TABLE[4*(a-1)+0];case 0:return g.RS_BLOCK_TABLE[4*(a-1)+1];case 3:return g.RS_BLOCK_TABLE[4*(a-1)+2];case 2:return g.RS_BLOCK_TABLE[4*(a-1)+3]}},h.prototype={get:function(a){return 1==(this.buffer[Math.floor(a/8)]>>>7-a%8&1)},put:function(a,b){for(var c=0;b>c;c++)this.putBit(1==(a>>>b-c-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}},"string"==typeof c&&(c={text:c}),c=b.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},c),this.each(function(){var d;if("canvas"==c.render){d=new e(c.typeNumber,c.correctLevel),d.addData(c.text),d.make();var f=document.createElement("canvas");f.width=c.width,f.height=c.height;for(var g=f.getContext("2d"),h=c.width/d.getModuleCount(),i=c.height/d.getModuleCount(),j=0;j<d.getModuleCount();j++)for(var k=0;k<d.getModuleCount();k++){g.fillStyle=d.isDark(j,k)?c.foreground:c.background;var l=Math.ceil((k+1)*h)-Math.floor(k*h),m=Math.ceil((j+1)*h)-Math.floor(j*h);g.fillRect(Math.round(k*h),Math.round(j*i),l,m)}}else for(d=new e(c.typeNumber,c.correctLevel),d.addData(c.text),d.make(),f=b("<table></table>").css("width",c.width+"px").css("height",c.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",c.background),g=c.width/d.getModuleCount(),h=c.height/d.getModuleCount(),i=0;i<d.getModuleCount();i++)for(j=b("<tr></tr>").css("height",h+"px").appendTo(f),k=0;k<d.getModuleCount();k++)b("<td></td>").css("width",g+"px").css("background-color",d.isDark(i,k)?c.foreground:c.background).appendTo(j);d=f,a(d).appendTo(this)})}}(a),a}),define("share_module",["qrcode","underscore"],function(a,b){var c=function(a){for(key in a)e.module[key]=a[key]},d=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+encodeURIComponent(a[c]||""));return b.join("&")},e={module:{title:"PC书城",desc:"",pic:"http://img62.ddimg.cn/digital/product/42/84/1960064284_ii_cover.jpg?version=9b5b3b6a-6357-4c70-bf01-1f4d37709e26",url:document.location.href},openurl:{sina:"http://service.weibo.com/share/share.php?",qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?",qq:"http://connect.qq.com/widget/shareqq/index.html?",qqweibo:"http://share.v.t.qq.com/index.php?c=share&a=index&"}},f=function(a){return a.stopPropagation(),a.preventDefault(),!1},g=function(){a(e.module.el).bind("mouseover",function(b){a(this).find(".sharelist").show(),f(b)}),a(e.module.el).bind("mouseout",function(b){a(this).find(".sharelist").hide(),a(this).find(".weixinC").hide(),f(b)}),a(e.module.el).delegate(".icon.clicked","click",function(){var b=a(this).attr("data-type");window.open(e.openurl[b]+d(e.params[b]))}),a(e.module.el).delegate(".icon.weixin","mouseover",function(){var b=a(this).attr("data-type");if(0===a(this).find("table,canvas").length){var b=document.createElement("canvas").getContext?"canvas":"table";a(this).find(".weixinC").qrcode({render:b,width:100,height:110,correctLevel:0,text:e.module.url})}a(this).find(".weixinC").show()}),a(e.module.el).delegate(".icon.weixin","mouseout",function(){a(this).find(".weixinC").hide()})},h=function(a){c(a),e.params={sina:{url:e.module.url,title:e.module.title+"（摘要："+e.module.desc.substr(0,80)+"...）",pic:e.module.pic,language:"zh_cn",searchPic:!1,appkey:1315955721,ralateUid:1647263235},qzone:{url:e.module.url,title:e.module.title,pics:e.module.pic,summary:e.module.desc.substr(0,200)},qq:{url:e.module.url,title:e.module.title,pics:e.module.pic,summary:e.module.desc.substr(0,200)}},g()};return{render:function(b){if(b.el&&!(a(b.el).find(".shareC").length>0)){var c='<div class="shareC"><div class="sharelist clearfix hide"><i class="weibo icon clicked" data-type="sina"></i><i class="weixin icon" data-type="weixin"><div class="weixinC hide"></div></i><i class="qq icon clicked" data-type="qzone"></i></div></div>';a(b.el).append(c),h(b),a(b.el).mouseover()}}}}),define("channelInfo",["jquery","underscore","ddbase","loginModule","share_module"],function(a,b,c,d,e){var f={getData:function(b,c,d,e,f){a.ajax({type:b,url:c,data:d,timeout:5e3,success:function(a){e.call(this,a)},error:function(){f.call(this)}})},getUrl:{channelUrl:"/media/api2.go?action=channel&cId="+c.getQueryString("cId")+c.baseApiParams},mark:{hasBookList:!0,hasArticalList:!0,cId:c.getQueryString("cId"),custId:c.getCookie("MDD_custId"),isBookList:null,getDate:!1},channelBook:null,introWrapEle:null,setIntroCell:function(d){var e=d.status.code;if(0===e){var g=d.data;f.mark.hasBookList=!!g.channel.bookList,f.mark.hasBookList&&(f.mark.isBookList=g.channel.bookList.booklistId,f.channelBook=g.channel.bookList),f.mark.hasArticalList=!!g.channel.hasArtical,f.mark.getDate=!0;var h={};h.dataObj=g,h.getQueryString=c.getQueryString;var i=f.introWrapEle,j=b.template(a("#channeldetail_intro_module").html());i.append(j(h))}},getErr:function(){},subScribe:function(b,e,f,g,h,i){function j(){b.find(".dingbtn").text("已订阅"),b.removeClass().addClass("ding alreadysub"),a(".first p").eq(0).html(parseInt(a(".first p").eq(0).text())+1)}function k(){b.find(".dingbtn").text("订阅"),b.removeClass().addClass("ding nosub"),a(".first p").eq(0).html(parseInt(a(".first p").eq(0).text())-1)}function l(){}function m(){}var n=this;if(c.token()){var o=b.text(),p="/media/api2.go?action=channelSub";switch(o){case"订阅":p+="&op=1&cId="+e+"&custId="+f+c.baseApiParams,n.getData("POST",p,"",j,l);break;case"已订阅":b.find(".dingbtn").text("取消订阅"),b.removeClass().addClass("ding cancelsub");break;case"取消订阅":p+="&op=0&cId="+e+"&custId="+f+c.baseApiParams,n.getData("POST",p,"",k,m)}}else d()},startGetData:function(b){var c=this;c.introWrapEle=b,c.getData("GET",c.getUrl.channelUrl,"",c.setIntroCell,c.getErr),a("body").on("click",".ding",function(){c.subScribe(a(this),a(this).attr("cid"),a(this).attr("custid"),"nosub","alreadysub","cancelsub")}),a("body").on("click",".share",function(){e.render({el:".share"})})}};return f}),define("indexFloorScroll",["jquery","ddbase"],function(a,b){var c={};return c.init=function(){c.jump();var b=(a("body").outerHeight(),a(window).height());a(window).scroll(function(){a(".floor_level").eq(0).offset().top<a(window).scrollTop()+b/2?a(".go_to_floor").show():a(".go_to_floor").hide(),a(".go_to_floor").is(":visible")&&a(".floor_level").each(function(c,d){var e=(a(".floor_level").eq(c).offset().top,a(window).scrollTop());a(".floor_level").eq(c).offset().top<e+b/2&&a(".floor_level").eq(c).offset().top+a(".floor_level").outerHeight()>e+b/2?a(".go_to_floor li").eq(c).find(".floor_num").hide().end().find(".floor_title").addClass("changeScroll").show():a(".go_to_floor li").eq(c).find(".floor_num").css({display:"block"}).end().find(".floor_title").removeClass("changeScroll").hide()})})},c.jump=function(){a(".go_to_floor li").click(function(){var b=a(this).index();a("html,body").animate({scrollTop:a(".floor_level").eq(b).offset().top},500)})},c}),require(["jquery","lazyload","publicTabModule","indexClassModule","publicMethod","indexFocusone","indexLimitedTemplate","limitedFreeModule","channelInfo","ddbase","indexFloorScroll"],function(a,b,c,d,e,f,g,h,i,j,k){a(function(){a(".index_content_right img").lazyload({effect:"fadeIn"}),a(".index_content img").lazyload({effect:"fadeIn"}),a(window).scroll()}),c.tabChange(a(".index_righttab_module .header li"),a(".index_righttab_module .content"),"click","active"),c.slideTab(a("#sell_list_nav_bar"),"only_one","click",a(".index_story .content")),c.slideTab(a("#pdf_nav_bar"),"only_one","click",a(".index_pdf_story .content")),c.lunboTab(a(".index_e_goods .content"),a(".index_ebookarrow_module .left"),a(".index_ebookarrow_module .right")),e.init(),d.classifyLayer(".index_class_module",".index_class_module dd",".class_hover_layer","hover"),f.unslider({dots:!0},a(".index_focusone_module")),a(".index_focusone_module .dots").css("margin-left",-a(".index_focusone_module .dots").width()/2);new h.view({template:g,el:"#limitedFree",dataUrl:"/media/api.go?action=freeforlimited&columnType=rec_limited_free&channelType=all&start=0&end=7"});a("body").on("click",".ding",function(){i.subScribe(a(this),a(this).attr("cid"),a(this).attr("custid"),"nosub","alreadysub","cancelsub")}),k.init()}),define("index",function(){});